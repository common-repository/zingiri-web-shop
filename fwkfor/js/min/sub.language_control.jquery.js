appsLanguageControl={i:0,editor:Array(),control:Array(),textTag:Array(),helperTag:Array(),node:Array(),content:Array(),lang:Array(),init:function(d,b,c,a){this.i++;this.editor[this.i]=a;this.control[this.i]=jQuery("#"+d);this.textTag[this.i]=jQuery("#"+c);this.helperTag[this.i]=jQuery("#"+b);lang=this.control[this.i].attr("value");this.content[this.i]=new Object();this.node[this.i]=jQuery("<div></div>");this.node[this.i].append(this.textTag[this.i].val());that=this;if(this.helperTag[this.i].children("div").size()>0){this.helperTag[this.i].children("div").each(function(e,f){that.content[that.i][f.id]=jQuery("#"+f.id).html()})}else{this.content[this.i][lang]=this.textTag[this.i].html();alert("content="+lang+"/"+this.textTag[this.i].html())}this.refresh(lang,this.i);jQuery("#appscommit").bind("click",this,function(f){f.data.refresh("");that.helperTag.html("");f.data.textTag.css("color","white");jQuery();jQuery.each(that.content,function(g,e){divTag=jQuery('<div id="'+g+'">'+e+"</div>");that.helperTag.append(divTag)});f.data.textTag.val(that.helperTag.html());if(f.data.editor==1){f.data.textTag.parent().find("iframe").contents().find("body").html(that.helperTag.html())}});jQuery("#"+d).bind("change",{that:this,i:this.i},function(f){f.data.that.refresh(f.data.that.control[f.data.i].attr("value"),f.data.i)})},refresh:function(b,a){that=this;if(this.editor[a]==0){newContent=this.textTag[a].val()}else{newContent=this.textTag[a].parent().find("iframe").contents().find("body").html()}if(this.lang[a]&&this.content[a][this.lang[a]]==null){this.content[a][this.lang[a]]=""}jQuery.each(this.content[a],function(d,c){if(d==that.lang[a]){that.content[a][d]=newContent}});if(this.editor[a]==1){if(that.content[a][b]){this.textTag[a].parent().find("iframe").contents().find("body").html(that.content[a][b])}else{this.textTag[a].parent().find("iframe").contents().find("body").html("")}}else{if(that.content[a][b]){that.textTag[a].val(that.content[a][b])}else{that.textTag[a].val("")}}this.lang[a]=b}};